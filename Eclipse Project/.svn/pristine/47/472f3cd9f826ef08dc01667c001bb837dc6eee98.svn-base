/*
 * CSE 593 - Fall 2016 - Applied Project
 * Author  : Lucio Ortiz and Robert Blazewicz
 * Version : DEVSJAVA 3.0
 * Date    : 2016-09-16
 */
package ExperimentMod;

import java.awt.Dimension;
import java.awt.Point;

import EngineMod.TurbojetEngine;
import GenCol.entity;
import turbojet.toolkit.Settings;
import turbojet.toolkit.SettingsSingleton;
import view.modeling.ViewableAtomic;
import view.modeling.ViewableComponent;
import view.modeling.ViewableDigraph;


/**
 * The Class ExperimentEngine.
 */
public class ExperimentEngine extends ViewableDigraph {

  /**
   * Instantiates a new experiment engine.
   */
  public ExperimentEngine() {
    this("Experiment Engine");
  }

  /**
   * Instantiates a new experiment engine.
   *
   * @param name the name
   */
  public ExperimentEngine(String name) {
    super(name);
    defineLayout();

    final Settings settings = SettingsSingleton.getInstance();
    System.out.println("Pathname: " + settings.getPathname());
    System.out.println("Filename: " + settings.getFilename());
    System.out.println("Total: " + settings.getMap().size());
    settings.debug();

    addInport("in");
    addOutport("out");

    addTestInput("in", new entity("job"));
  }

  private void defineLayout() {
    ViewableAtomic frontPorch = new ExperimentFrontPorch("FrontPorch");
    ViewableAtomic backPorch = new ExperimentBackPorch("BackPorch");
    ViewableAtomic dataRecorder = new ExperimentDataRecorder("DataRecorder");
    TurbojetEngine turbojetEngine = new TurbojetEngine("TurbojetEngine");

    add(frontPorch);
    add(backPorch);
    add(dataRecorder);
    add(turbojetEngine);

    addCoupling(this, "in", frontPorch, "in");
    addCoupling(frontPorch, "xOut", turbojetEngine, "xIn");
    addCoupling(turbojetEngine, "xOut", backPorch, "xIn");
    addCoupling(turbojetEngine, "xOut", dataRecorder, "xIn");
    addCoupling(backPorch, "out", this, "out");
    addCoupling(dataRecorder, "trigger", frontPorch, "trigger");

    initialize();

    preferredSize = new Dimension(586, 90);
    frontPorch.setPreferredLocation(new Point(-4, 19));
    turbojetEngine.setPreferredLocation(new Point(163, 19));
    backPorch.setPreferredLocation(new Point(333, 19));
  }

    /**
     * Automatically generated by the SimView program.
     * Do not edit this manually, as such changes will get overwritten.
     */
    public void layoutForSimView()
    {
        preferredSize = new Dimension(1196, 319);
        ((ViewableComponent)withName("BackPorch")).setPreferredLocation(new Point(915, 115));
        ((ViewableComponent)withName("DataRecorder")).setPreferredLocation(new Point(915, 26));
        ((ViewableComponent)withName("FrontPorch")).setPreferredLocation(new Point(-7, 31));
        ((ViewableComponent)withName("TurbojetEngine")).setPreferredLocation(new Point(51, 112));
    }
}
