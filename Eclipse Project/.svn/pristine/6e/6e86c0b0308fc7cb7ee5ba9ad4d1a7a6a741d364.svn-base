/*
 * CSE 593 - Fall 2016 - Applied Project
 * Author  : Lucio Ortiz and Robert Blazewicz
 * Version : DEVSJAVA 3.0
 * Date    : 2016-09-16
 */
package ExperimentMod;

import java.awt.Dimension;
import java.awt.Point;

import EngineMod.TurbojetEngine;
import GenCol.entity;
import turbojet.toolkit.Settings;
import turbojet.toolkit.SettingsSingleton;
import view.modeling.ViewableAtomic;
import view.modeling.ViewableComponent;
import view.modeling.ViewableDigraph;


/**
 * The Class ExperimentEngine.
 */
public class ExperimentEngine extends ViewableDigraph {

  /**
   * Instantiates a new experiment engine.
   */
  public ExperimentEngine() {
    this("Experiment Engine", 90);
  }

  /**
   * Instantiates a new experiment engine.
   *
   * @param name the name
   * @param proc_time the proc time
   */
  public ExperimentEngine(String name, double proc_time) {
    super(name);
    make(proc_time);

    final Settings settings = SettingsSingleton.getInstance();
    System.out.println("Pathname: " + settings.getPathname());
    System.out.println("Filename: " + settings.getFilename());
    System.out.println("Total: " + settings.getMap().size());
    settings.debug();

    addInport("in");
    addOutport("out");

    addTestInput("in", new entity("job"));
  }

  /**
   * Make.
   *
   * @param proc_time the proc time
   */
  private void make(double proc_time) {
    ViewableAtomic p0 = new ExperimentFrontPorch("FrontPorch", proc_time / 3);
    TurbojetEngine p1 = new TurbojetEngine("TurbojetEngine", proc_time / 3);
    ViewableAtomic p2 = new ExperimentBackPorch("BackPorch", proc_time / 3);
    ViewableAtomic p3 = new ExperimentDataRecorder("DataRecorder", proc_time / 3);

    add(p0);
    add(p1);
    add(p2);
    add(p3);

    addCoupling(this, "in", p0, "in");
    addCoupling(p0, "out", p1, "in");
    addCoupling(p1, "out", p2, "in");
    addCoupling(p1, "out", p3, "in");
    addCoupling(p2, "out", this, "out");
    addCoupling(p2, "next", p0, "next");

    initialize();

    preferredSize = new Dimension(586, 90);
    p0.setPreferredLocation(new Point(-4, 19));
    p1.setPreferredLocation(new Point(163, 19));
    p2.setPreferredLocation(new Point(333, 19));
  }

  /**
   * Automatically generated by the SimView program.
   * Do not edit this manually, as such changes will get overwritten.
   */
  public void layoutForSimView()
  {
    preferredSize = new Dimension(1000, 252);
    ((ViewableComponent)withName("BackPorch")).setPreferredLocation(new Point(731, 19));
    ((ViewableComponent)withName("TurbojetEngine")).setPreferredLocation(new Point(166, 78));
    ((ViewableComponent)withName("FrontPorch")).setPreferredLocation(new Point(-10, 27));
    ((ViewableComponent)withName("DataRecorder")).setPreferredLocation(new Point(738, 183));
  }
}
